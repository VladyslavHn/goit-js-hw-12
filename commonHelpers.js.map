{"version":3,"file":"commonHelpers.js","sources":["../src/js/index.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\nconst form = document.querySelector('.search-form');\nconst list = document.querySelector('.pictures-list');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.button-load');\n\nconst lightbox = new SimpleLightbox('.gallery-card a.gallary-card-link', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nlet search = null;\nlet totalResult = 0;\n\nform.addEventListener('submit', (e) => {\n    e.preventDefault();\n    let searchImg = e.target.elements.input.value;\n    search = searchImg;\n    page = 1;\n\n    if (search.trim('') === '') {\n        return;\n    }\n\n    loader.style.display = 'flex';\n\n    if (lightbox) {\n        lightbox.close();\n        list.innerHTML = '';\n    }\n\n    setTimeout(() => {\n        getImg()\n            .then(data => {\n                totalResult = data.totalHits;\n                render(data.hits);\n                lightbox.refresh();\n                if (data.hits.length === 0) {\n                    iziToast.error({\n                        message: 'Sorry, there are no images matching your search query. Please try again!',\n                        position: 'topRight',\n                        backgroundColor: 'red',\n                        messageColor: 'white',\n                    });\n                    loadBtn.disabled = true;\n                    loadBtn.style.display = 'none'\n                    loadBtn.style.opacity = 0;\n                    loadBtn.style.overflow = 'hidden';\n                } else {\n                    loadBtn.disabled = false;\n                    loadBtn.style.display = 'flex';\n                    loadBtn.style.opacity = 1;\n                    loadBtn.style.overflow = 'visible';\n                }\n                \n                \n                \n            })\n            .catch(error => {\n                console.error('Помилка отримання зображень:', error);\n            })\n            .finally(() => {\n                loader.style.display = 'none';\n            });\n    }, 500);\n    btnChange();\n    e.target.reset();\n});\n\nlet page = 1;\nlet perPage = 15;\n\nloadBtn.addEventListener('click', async () => {\n    page += 1;\n    const data = await getImg();\n    render(data.hits);\n    lightbox.refresh();\n    btnChange();\n    \n    const galleryCards = document.querySelectorAll('.gallery-card');\n    galleryCards.forEach(card => {\n        const cardSize = card.getBoundingClientRect();\n        window.scrollBy({\n            top: cardSize.height * 1.36,\n            behavior: \"smooth\",\n        });\n    });\n});\n\n\n\n\nasync function getImg() {\n    const API_KEY = '42193842-675e74ed987999787d4b57f5e';\n    \n    const params = new URLSearchParams({\n        key: API_KEY,\n        per_page: perPage,\n        page: page,\n        q: search,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n    \n    const response = await axios.get(`https://pixabay.com/api/?${params}`);\n    return response.data;\n}\n\nfunction btnChange() {\n    const maxPage = Math.ceil(totalResult / perPage);\n    if (page === maxPage) {\n        iziToast.warning({\n                        message: \"We're sorry, but you've reached the end of search results.\",\n                        position: 'topRight',\n                        backgroundColor: '#add8e6',\n                        messageColor: 'white',\n        });\n        loadBtn.disabled = true;\n        loadBtn.style.display = 'none'\n        loadBtn.style.opacity = 0;\n        loadBtn.style.overflow = 'hidden';\n    }\n\n}\n\nfunction render(imgs) {\n    const markup = imgs.map((img) => {\n        return `<li class=\"gallery-card\">\n    <a class=\"gallary-card-link\" href=\"${img.largeImageURL}\">\n        <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n    <ul class=\"image-info\">\n            <li class=\"image-item-info\">\n            <p>Likes</p>\n            <p>${img.likes}</p>\n        </li>\n        <li class=\"image-item-info\">\n            <p>Views</p>\n            <p>${img.views}</p>\n        </li>\n        <li class=\"image-item-info\">\n            <p>Comments</p>\n            <p>${img.comments}</p>\n        </li>\n        <li class=\"image-item-info\">\n            <p>Downloads</p>\n            <p>${img.downloads}</p>\n        </li>\n    </ul>\n    </a>\n</li>`;\n    }).join('');\n\n    list.insertAdjacentHTML('beforeend', markup);\n}\n"],"names":["form","list","loader","loadBtn","lightbox","SimpleLightbox","search","totalResult","e","page","getImg","data","render","iziToast","error","btnChange","perPage","card","cardSize","API_KEY","params","axios","maxPage","imgs","markup","img"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,cAAc,EAE/CC,EAAW,IAAIC,EAAe,oCAAqC,CACrE,aAAc,MACd,aAAc,GAClB,CAAC,EAED,IAAIC,EAAS,KACTC,EAAc,EAElBP,EAAK,iBAAiB,SAAWQ,GAAM,CACnCA,EAAE,eAAc,EAEhBF,EADgBE,EAAE,OAAO,SAAS,MAAM,MAExCC,EAAO,EAEHH,EAAO,KAAK,EAAE,IAAM,KAIxBJ,EAAO,MAAM,QAAU,OAEnBE,IACAA,EAAS,MAAK,EACdH,EAAK,UAAY,IAGrB,WAAW,IAAM,CACbS,EAAQ,EACH,KAAKC,GAAQ,CACVJ,EAAcI,EAAK,UACnBC,EAAOD,EAAK,IAAI,EAChBP,EAAS,QAAO,EACZO,EAAK,KAAK,SAAW,GACrBE,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,WACV,gBAAiB,MACjB,aAAc,OACtC,CAAqB,EACDV,EAAQ,SAAW,GACnBA,EAAQ,MAAM,QAAU,OACxBA,EAAQ,MAAM,QAAU,EACxBA,EAAQ,MAAM,SAAW,WAEzBA,EAAQ,SAAW,GACnBA,EAAQ,MAAM,QAAU,OACxBA,EAAQ,MAAM,QAAU,EACxBA,EAAQ,MAAM,SAAW,UAK7C,CAAa,EACA,MAAMW,GAAS,CACZ,QAAQ,MAAM,+BAAgCA,CAAK,CACnE,CAAa,EACA,QAAQ,IAAM,CACXZ,EAAO,MAAM,QAAU,MACvC,CAAa,CACR,EAAE,GAAG,EACNa,IACAP,EAAE,OAAO,QACb,CAAC,EAED,IAAIC,EAAO,EACPO,EAAU,GAEdb,EAAQ,iBAAiB,QAAS,SAAY,CAC1CM,GAAQ,EACR,MAAME,EAAO,MAAMD,IACnBE,EAAOD,EAAK,IAAI,EAChBP,EAAS,QAAO,EAChBW,IAEqB,SAAS,iBAAiB,eAAe,EACjD,QAAQE,GAAQ,CACzB,MAAMC,EAAWD,EAAK,wBACtB,OAAO,SAAS,CACZ,IAAKC,EAAS,OAAS,KACvB,SAAU,QACtB,CAAS,CACT,CAAK,CACL,CAAC,EAKD,eAAeR,GAAS,CACpB,MAAMS,EAAU,qCAEVC,EAAS,IAAI,gBAAgB,CAC/B,IAAKD,EACL,SAAUH,EACV,KAAMP,EACN,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAGD,OADiB,MAAMe,EAAM,IAAI,4BAA4BD,GAAQ,GACrD,IACpB,CAEA,SAASL,GAAY,CACjB,MAAMO,EAAU,KAAK,KAAKf,EAAcS,CAAO,EAC3CP,IAASa,IACTT,EAAS,QAAQ,CACD,QAAS,6DACT,SAAU,WACV,gBAAiB,UACjB,aAAc,OACtC,CAAS,EACDV,EAAQ,SAAW,GACnBA,EAAQ,MAAM,QAAU,OACxBA,EAAQ,MAAM,QAAU,EACxBA,EAAQ,MAAM,SAAW,SAGjC,CAEA,SAASS,EAAOW,EAAM,CAClB,MAAMC,EAASD,EAAK,IAAKE,GACd;AAAA,yCAC0BA,EAAI;AAAA,oBACzBA,EAAI,sBAAsBA,EAAI;AAAA;AAAA;AAAA;AAAA,iBAIjCA,EAAI;AAAA;AAAA;AAAA;AAAA,iBAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,iBAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,iBAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,MAKhB,EAAE,KAAK,EAAE,EAEVxB,EAAK,mBAAmB,YAAauB,CAAM,CAC/C"}